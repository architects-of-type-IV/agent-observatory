<% detail = @stats[:queue_detail] || [] %>
<div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-3">
  <h3 class="text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2">
    CommandQueue (Filesystem)
  </h3>
  <%= if detail == [] do %>
    <p class="text-xs text-zinc-600">No pending commands</p>
  <% else %>
    <table class="w-full text-xs">
      <thead>
        <tr class="text-zinc-600 text-left">
          <th class="pb-1 font-medium">Session</th>
          <th class="pb-1 font-medium text-right">Pending</th>
          <th class="pb-1 font-medium text-right">Oldest</th>
        </tr>
      </thead>
      <tbody>
        <tr :for={entry <- detail} class="border-t border-zinc-800/50">
          <td class="py-1 text-zinc-400 font-mono">{short_id(entry.session_id)}</td>
          <td class="py-1 text-zinc-500 text-right">{entry.pending_count}</td>
          <td class="py-1 text-zinc-600 text-right">{format_seconds(entry.oldest_age_sec)}</td>
        </tr>
      </tbody>
    </table>
  <% end %>
</div>
