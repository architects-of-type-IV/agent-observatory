<% alerts = build_alerts(@issues, @stale) %>
<div
  :if={alerts != []}
  class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-3 max-h-48 overflow-y-auto"
>
  <h3 class="text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2">Alerts</h3>
  <div class="space-y-1">
    <div
      :for={alert <- alerts}
      class="flex items-center gap-2 text-xs py-1"
    >
      <span class={[
        "w-1.5 h-1.5 rounded-full shrink-0",
        severity_color(alert.severity)
      ]} />
      <span class={severity_text_color(alert.severity)}>{alert.message}</span>
      <button
        :if={alert.action}
        phx-click={alert.action}
        phx-value-id={alert.target_id}
        class="ml-auto px-1.5 py-0.5 bg-zinc-800 text-zinc-400 rounded hover:bg-zinc-700 transition"
      >
        {alert.action_label}
      </button>
    </div>
  </div>
</div>
