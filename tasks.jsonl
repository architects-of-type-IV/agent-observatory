{"id":"1","status":"completed","subject":"Implement SchemaInterceptor Module & Validation Contract (Section 2.1)","description":"This section creates `Observatory.Gateway.SchemaInterceptor` and establishes the two foundational contracts it must satisfy: the module boundary constraint (no cross-imports between `Observatory.Gateway.*` and `ObservatoryWeb.*`) and the `validate/1` synchronous contract (delegates to `DecisionLog.changeset/2`, returns a tagged tuple, no async work). Both tasks must pass `mix compile --warnings-as-errors` before any HTTP wiring in Section 2.2 begins.","goal":"Section 2.1 compiles from scratch matching its FRD exactly","acceptance_criteria":["mix compile --warnings-as-errors","mix test test/observatory/gateway/schema_interceptor_test.exs"],"priority":"high","blocked_by":[],"files":["lib/observatory/gateway/schema_interceptor.ex","test/observatory/gateway/schema_interceptor_test.exs"],"done_when":"mix compile --warnings-as-errors && mix test test/observatory/gateway/schema_interceptor_test.exs","owner":"lead","created":"2026-02-22T14:12:05Z","updated":"2026-02-22T14:22:34Z","tags":["phase-2","schemainterceptor-module-validation-contract","section-2.1"],"roadmap_ref":"2.1","notes":""}
{"id":"2","status":"completed","subject":"Implement HTTP Endpoint & 422 Rejection (Section 2.2)","description":"This section wires the HTTP surface: a `:api` pipeline with JSON body parsing, the `POST /gateway/messages` route, and `ObservatoryWeb.GatewayController` with both the success (202) and rejection (422) branches. The controller calls `SchemaInterceptor.validate/1` as its first action. All router and controller changes must compile and all gateway controller tests must pass before proceeding to Section 2.3.","goal":"Section 2.2 compiles from scratch matching its FRD exactly","acceptance_criteria":["mix compile --warnings-as-errors","mix test test/observatory_web/controllers/gateway_controller_test.exs"],"priority":"high","blocked_by":["1"],"files":["lib/observatory_web/controllers/gateway_controller.ex","lib/observatory_web/router.ex","test/observatory_web/controllers/gateway_controller_test.exs"],"done_when":"mix compile --warnings-as-errors && mix test test/observatory_web/controllers/gateway_controller_test.exs","owner":"lead","created":"2026-02-22T14:12:05Z","updated":"2026-02-22T14:26:42Z","tags":["phase-2","http-endpoint-422-rejection","section-2.2"],"roadmap_ref":"2.2","notes":""}
{"id":"3","status":"completed","subject":"Implement SchemaViolationEvent & Security (Section 2.3)","description":"This section implements two behaviors that must occur on every validation rejection: construction of the `SchemaViolationEvent` plain map (with the raw payload hash security policy enforced) and broadcast of that event on `\"gateway:violations\"`. These behaviors are implemented in `SchemaInterceptor` as helper functions called by the controller's rejection path. All raw payload security constraints (no logging, no ETS, no `\"raw_payload\"` key in the event) are enforced by the test suite.","goal":"Section 2.3 compiles from scratch matching its FRD exactly","acceptance_criteria":["mix compile --warnings-as-errors","mix test test/observatory/gateway/schema_interceptor_test.exs","mix test test/observatory_web/controllers/gateway_controller_test.exs"],"priority":"high","blocked_by":["1","2"],"files":["lib/observatory_web/controllers/gateway_controller.ex","lib/observatory/gateway/schema_interceptor.ex","test/observatory_web/controllers/gateway_controller_test.exs","test/observatory/gateway/schema_interceptor_test.exs"],"done_when":"mix compile --warnings-as-errors && mix test test/observatory_web/controllers/gateway_controller_test.exs test/observatory/gateway/schema_interceptor_test.exs","owner":"lead","created":"2026-02-22T14:12:05Z","updated":"2026-02-22T14:31:21Z","tags":["phase-2","schemaviolationevent-security","section-2.3"],"roadmap_ref":"2.3","notes":""}
{"id":"4","status":"completed","subject":"Implement Topology Node State & Post-Validation Routing (Section 2.4)","description":"This section handles two behaviors: what the topology subscriber layer must do when it receives a `SchemaViolationEvent` (node state transition to `:schema_violation` with orange highlight and 30-second clearance timer), and what the controller must do on the success path (entropy overwrite via `EntropyTracker.record_and_score/2`, PubSub broadcast on `\"gateway:messages\"`, HTTP 202 with confirmed `trace_id`). These tasks complete the full Gateway Core lifecycle.","goal":"Section 2.4 compiles from scratch matching its FRD exactly","acceptance_criteria":["mix compile --warnings-as-errors","mix test test/observatory_web/controllers/gateway_controller_test.exs"],"priority":"high","blocked_by":["3"],"files":["lib/observatory_web/controllers/gateway_controller.ex","test/observatory_web/controllers/gateway_controller_test.exs"],"done_when":"mix compile --warnings-as-errors && mix test test/observatory_web/controllers/gateway_controller_test.exs","owner":"lead","created":"2026-02-22T14:12:05Z","updated":"2026-02-22T14:34:02Z","tags":["phase-2","topology-node-state-post-validation-routing","section-2.4"],"roadmap_ref":"2.4","notes":""}
{"id":"5","status":"completed","subject":"Generate migrations and run full test suite (Phase 2 final)","description":"Final integration task for Phase 2. Generate any pending migrations, apply them, and run the complete test suite with zero failures and zero warnings. Adapt commands to the project build system.","goal":"All Phase 2 changes integrated, full test suite green","acceptance_criteria":["All pending migrations/schema changes applied","Full test suite passes with 0 failures","Build passes with zero warnings"],"priority":"critical","blocked_by":["1","2","3","4"],"files":[],"done_when":"mix compile --warnings-as-errors && mix test","owner":"lead","created":"2026-02-22T14:12:05Z","updated":"2026-02-22T14:34:34Z","tags":["phase-2","migration","final"],"roadmap_ref":"2.final","notes":"Blocks on ALL other tasks. Run all schema changes and tests in one final pass."}
