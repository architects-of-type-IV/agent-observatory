---
type: task
id: "4.6.3"
section_id: "4.6"
title: "Diamond DAG Node for HITL Interventions"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0278"]
---

# Task 4.6.3: Diamond DAG Node for HITL Interventions

## Goal

Implement the diamond-shaped DAG node rendering for `HITLInterventionEvent` records in the causal DAG timeline component. The diamond node must be inserted at the correct temporal position, grouped by pause window, and display a count badge when multiple interventions share the same pause window.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0278

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.6.3.1 | Query HITLInterventionEvent rows by session_id and merge into DAG node list as sentinel {:hitl_intervention, events} entries | mix compile --warnings-as-errors | pending |
| 4.6.3.2 | Implement hitl_diamond_node/1 function component rendering SVG diamond with count badge and tooltip | mix compile --warnings-as-errors | pending |
| 4.6.3.3 | Write LiveView tests for subscription at mount, HITLGateOpenEvent sets hitl_gate_open, HITLGateCloseEvent clears it | mix test test/observatory_web/live/session_drilldown_live_test.exs | pending |
