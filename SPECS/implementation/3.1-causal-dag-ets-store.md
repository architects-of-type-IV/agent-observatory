---
type: section
id: "3.1"
phase_id: "3"
title: "CausalDAG ETS Store"
status: pending
---

# Section 3.1: CausalDAG ETS Store

## Purpose

This section creates the `Observatory.Mesh.CausalDAG` GenServer at `lib/observatory/mesh/causal_dag.ex` and establishes the core ETS data model. It implements the Node struct definition, per-session table creation, missing-field guard, root node detection, the 30-second orphan buffer with its resolution timer, and cycle prevention via ancestor-chain traversal. These four tasks (covering FR-8.1 through FR-8.4) must complete before any DAG query API, TopologyBuilder, or EntropyTracker integration can wire in.

## Tasks

| ID | Title | Governed By | Parent UCs | Status |
|----|-------|-------------|------------|--------|
| 3.1.1 | Node Struct & ETS Table Setup | ADR-017 | UC-0230, UC-0231 | pending |
| 3.1.2 | Orphan Buffer (30-Second Window) | ADR-017 | UC-0232 | pending |
| 3.1.3 | Cycle Prevention | ADR-017 | UC-0233 | pending |
| 3.1.4 | Fork Nodes (Multiple Children) | ADR-017 | UC-0234 | pending |
