---
id: "1.3.2.1"
title: "Add from_json/1 returning {:ok, struct} or {:error, changeset}"
status: pending
task_id: "1.3.2"
governed_by: ["ADR-014"]
parent_uc: ["UC-0207", "UC-0208"]
---

goal: "Add def from_json(attrs) when is_map(attrs) that calls changeset/2 and returns {:ok, apply_changes(cs)} on valid or {:error, cs} on invalid"
allowed_files:
  - lib/observatory/mesh/decision_log.ex
blocked_by: ["1.1.2.2"]
steps:
  - Add def from_json(attrs) when is_map(attrs) to Observatory.Mesh.DecisionLog
  - Call changeset(%__MODULE__{}, attrs) to produce a changeset
  - Return {:ok, Ecto.Changeset.apply_changes(cs)} if cs.valid? is true
  - Return {:error, cs} if cs.valid? is false
done_when: "mix compile --warnings-as-errors"
