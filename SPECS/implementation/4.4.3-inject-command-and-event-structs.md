---
type: task
id: "4.4.3"
section_id: "4.4"
title: "inject Command and Four Command Types"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0274"]
---

# Task 4.4.3: inject Command and Four Command Types

## Goal

Implement `inject/4` that constructs a synthetic DecisionLog carrying the operator-supplied prompt and either appends it to the ETS buffer (if paused) or broadcasts it immediately (if normal). Define the `HITLGateOpenEvent` and `HITLGateCloseEvent` structs broadcast on the per-session PubSub topic.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0274

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.4.3.1 | Define HITLGateOpenEvent and HITLGateCloseEvent defstructs with required fields | mix compile --warnings-as-errors | pending |
| 4.4.3.2 | Implement inject/4 constructing synthetic %DecisionLog{} and buffering or broadcasting based on session state | mix compile --warnings-as-errors | pending |
