---
id: "1.3.3.1"
title: "Write nil-safe anchor field access test with minimal DecisionLog"
status: pending
task_id: "1.3.3"
governed_by: ["ADR-014"]
parent_uc: ["UC-0208"]
---

goal: "Write test named 'UI derivation anchor fields are accessible when embedded sections are nil' that builds a minimal DecisionLog via from_json/1 with only required fields and confirms nil-safe access to all six anchor fields without raising"
allowed_files:
  - test/observatory/mesh/decision_log_test.exs
blocked_by: ["1.3.2.2"]
steps:
  - Build a minimal %DecisionLog{} via from_json/1 with only the seven required fields
  - Assert accessing log.meta.parent_step_id, log.cognition, log.state_delta, log.control does not raise
  - Assert is_nil(log.cognition), is_nil(log.state_delta), is_nil(log.control)
  - Use Map.get(log.cognition || %{}, :reasoning_chain) pattern for all six anchor fields confirming nil without raising
done_when: "mix test test/observatory/mesh/decision_log_test.exs"
