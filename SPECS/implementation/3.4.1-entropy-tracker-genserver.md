---
type: task
id: "3.4.1"
section_id: "3.4"
title: "EntropyTracker GenServer & ETS"
status: pending
governed_by: ["ADR-018"]
parent_uc: ["UC-0242", "UC-0250"]
---

# Task 3.4.1: EntropyTracker GenServer & ETS

## Goal

`EntropyTracker` is the single authoritative owner of per-session sliding window data. No other module may write entropy tuples directly to ETS; the table is declared with access `:private`. The public API is `record_and_score/2`, called synchronously by `SchemaInterceptor`.

## Governing Decisions

- ADR-018

## Verification UCs

- UC-0242
- UC-0250

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.4.1.1 | Create entropy_tracker.ex with GenServer, private ETS :entropy_windows table, and start_link/1 | mix compile --warnings-as-errors | pending |
| 3.4.1.2 | Implement public record_and_score/2 as synchronous GenServer.call returning {:ok, score, severity} | mix compile --warnings-as-errors | pending |
| 3.4.1.3 | Write test that ETS table is private and raises ArgumentError from outside the GenServer process | mix test test/observatory/gateway/entropy_tracker_test.exs | pending |
