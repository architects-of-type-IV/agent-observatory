---
type: task
id: "4.5.3"
section_id: "4.5"
title: "HITLInterventionEvent Ash Resource"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0275"]
---

# Task 4.5.3: HITLInterventionEvent Ash Resource

## Goal

Create the `Observatory.Gateway.HITLInterventionEvent` Ash resource at `lib/observatory/gateway/hitl_intervention_event.ex` using the SQLite data layer with all required attributes including the `command_type` atom enum, `before_state` and `after_state` SHA-256 hash fields, and the nullable `reversed_at` field. Wire creation into the HITLController actions.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0275

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.5.3.1 | Create hitl_intervention_event.ex as Ash.Resource with all attributes and :create action | mix compile --warnings-as-errors | pending |
| 4.5.3.2 | Run mix ash.codegen and mix ash.migrate to create hitl_intervention_events table | mix ash.migrate && mix compile --warnings-as-errors | pending |
| 4.5.3.3 | Add create_audit_event/4 helper to HITLController and call at end of each action success path | mix compile --warnings-as-errors | pending |
