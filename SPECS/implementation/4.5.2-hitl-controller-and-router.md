---
type: task
id: "4.5.2"
section_id: "4.5"
title: "HITL Controller and Router Wiring"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0274", "UC-0280"]
---

# Task 4.5.2: HITL Controller and Router Wiring

## Goal

Implement `ObservatoryWeb.HITLController` with four actions (`pause/2`, `unpause/2`, `rewrite/2`, `inject/2`) each validating required fields before calling `HITLRelay`. Add all four routes under a `:hitl_api` pipeline including `OperatorAuth`.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0274
- UC-0280

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.5.2.1 | Create hitl_controller.ex with pause/2 validating agent_id, operator_id, reason and calling HITLRelay.pause | mix compile --warnings-as-errors | pending |
| 4.5.2.2 | Implement unpause/2, rewrite/2, and inject/2 actions with field validation and HITLRelay delegation | mix compile --warnings-as-errors | pending |
| 4.5.2.3 | Add :hitl_api pipeline with OperatorAuth plug and four session routes to router.ex | mix compile --warnings-as-errors | pending |
