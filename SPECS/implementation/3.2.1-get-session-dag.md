---
type: task
id: "3.2.1"
section_id: "3.2"
title: "get_session_dag/1"
status: pending
governed_by: ["ADR-017"]
parent_uc: ["UC-0235"]
---

# Task 3.2.1: get_session_dag/1

## Goal

`CausalDAG.get_session_dag/1` is the primary read API for both the Session Drill-down LiveView and `TopologyBuilder`. It must return a complete adjacency map of every node currently in ETS for a given session. For sessions with no ETS table, it must return a structured error rather than raising.

## Governing Decisions

- ADR-017

## Verification UCs

- UC-0235

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.2.1.1 | Implement get_session_dag/1 returning {:ok, node_map} or {:error, :session_not_found} | mix compile --warnings-as-errors | pending |
| 3.2.1.2 | Write tests for 12-node session returning correct map and unknown session returning :session_not_found | mix test test/observatory/mesh/causal_dag_test.exs | pending |
