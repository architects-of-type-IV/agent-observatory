---
id: "1.3.2.2"
title: "Write tests for valid map, invalid status, and missing meta"
status: pending
task_id: "1.3.2"
governed_by: ["ADR-014"]
parent_uc: ["UC-0207", "UC-0208"]
---

goal: "Write three tests for from_json/1: valid string-keyed map returns {:ok, %DecisionLog{}}, invalid action.status returns {:error, changeset} with inclusion error, missing meta returns {:error, changeset} with trace_id required error"
allowed_files:
  - test/observatory/mesh/decision_log_test.exs
blocked_by: ["1.3.2.1"]
steps:
  - Write test that from_json/1 with a valid string-keyed map returns {:ok, %DecisionLog{}} with all required fields populated
  - Write test that from_json/1 with action.status "timeout" returns {:error, changeset} with :status inclusion error
  - Write test that from_json/1 with missing "meta" key returns {:error, changeset} with :trace_id required error
done_when: "mix test test/observatory/mesh/decision_log_test.exs"
