---
type: task
id: "4.5.4"
section_id: "4.5"
title: "HITL Controller Tests"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0274", "UC-0275", "UC-0280", "UC-0281"]
---

# Task 4.5.4: HITL Controller Tests

## Goal

Write ExUnit tests for the controller actions, authentication plug, audit trail creation, and error paths.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0274
- UC-0275
- UC-0280
- UC-0281

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.5.4.1 | Write tests for valid pause 200, missing operator header 401, and whitespace-only operator header 401 | mix test test/observatory_web/controllers/hitl_controller_test.exs | pending |
| 4.5.4.2 | Write tests for rewrite missing trace_id 422, non-existent trace_id 422, pause creating HITLInterventionEvent row, and rewrite producing SHA-256 hashes | mix test test/observatory_web/controllers/hitl_controller_test.exs | pending |
