---
id: "2.1.2.a"
title: "Implement validate/1 delegating to DecisionLog.changeset/2 synchronously"
status: pending
task_id: "2.1.2"
governed_by: ["ADR-015"]
parent_uc: ["UC-0210"]
---

goal: "Implement @spec validate(map()) :: {:ok, DecisionLog.t()} | {:error, Ecto.Changeset.t()} and def validate(params) calling DecisionLog.changeset/2 in the calling process with no async primitives"
allowed_files:
  - lib/observatory/gateway/schema_interceptor.ex
blocked_by: ["2.1.1.a"]
steps:
  - Add @spec validate(map()) :: {:ok, DecisionLog.t()} | {:error, Ecto.Changeset.t()} to schema_interceptor.ex
  - Implement def validate(params) when is_map(params) calling changeset = DecisionLog.changeset(%DecisionLog{}, params)
  - Return {:ok, Ecto.Changeset.apply_changes(changeset)} when valid?
  - Return {:error, changeset} when not valid? â€” no Task, GenServer, Process.spawn, send, or receive inside the function
done_when: "mix compile --warnings-as-errors"
