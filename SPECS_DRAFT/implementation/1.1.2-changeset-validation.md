---
type: task
id: "1.1.2"
section_id: "1.1"
title: "Changeset Validation"
status: pending
governed_by: ["ADR-014"]
parent_uc: ["UC-0201", "UC-0202", "UC-0203"]
---

# Task 1.1.2: Changeset Validation

## Goal

Implement `changeset/2` in `Observatory.Mesh.DecisionLog` that accepts a `%DecisionLog{}` struct and a string-keyed params map, casts all six sections via `cast_embed/3` with `required: false`, and enforces the seven required fields across the embedded changesets via `validate_required/2`. Each embedded sub-schema gets its own private changeset function (or inline `with_changes` block) that runs its own cast and validate_required calls. A payload with all required fields must pass `Ecto.Changeset.valid?/1`; a payload missing any required field must produce a changeset error on the missing field key.

## Governing Decisions

- ADR-014

## Verification UCs

- UC-0201
- UC-0202
- UC-0203

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 1.1.2.1 | Implement changeset/2 with six cast_embed calls and private helpers | mix compile --warnings-as-errors | pending |
| 1.1.2.2 | Add validate_required to meta, identity, cognition, action changesets | mix compile --warnings-as-errors | pending |
| 1.1.2.3 | Create decision_log_test.exs with required-field validation tests | mix test test/observatory/mesh/decision_log_test.exs | pending |
