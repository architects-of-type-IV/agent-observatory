---
id: "2.1.2.d"
title: "Test validate/1 source contains no async primitives"
status: pending
task_id: "2.1.2"
governed_by: ["ADR-015"]
parent_uc: ["UC-0210"]
---

goal: "Add a test tagged @tag :validate that reads the source of schema_interceptor.ex and asserts it does not match ~r/Task\\.(start|async)|GenServer\\.call|Process\\.spawn|:erlang\\.spawn/"
allowed_files:
  - test/observatory/gateway/schema_interceptor_test.exs
blocked_by: ["2.1.2.c"]
steps:
  - In schema_interceptor_test.exs, add a test tagged @tag :validate
  - Read the source of lib/observatory/gateway/schema_interceptor.ex via File.read!/1
  - Assert the source does not match ~r/Task\.(start|async)|GenServer\.call|Process\.spawn|:erlang\.spawn/
  - Confirm the test passes
done_when: "mix test test/observatory/gateway/schema_interceptor_test.exs --only validate"
