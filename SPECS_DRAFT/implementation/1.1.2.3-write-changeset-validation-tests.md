---
id: "1.1.2.3"
title: "Write changeset validation ExUnit tests"
status: pending
task_id: "1.1.2"
governed_by: ["ADR-014"]
parent_uc: ["UC-0201", "UC-0202", "UC-0203"]
---

goal: "Create test/observatory/mesh/decision_log_test.exs with tests for valid full payload, missing trace_id error, missing agent_id error, missing intent error, and nil optional sections remaining valid"
allowed_files:
  - test/observatory/mesh/decision_log_test.exs
blocked_by: ["1.1.2.2"]
steps:
  - Create test/observatory/mesh/decision_log_test.exs with use ExUnit.Case
  - Write test that valid full payload passes Ecto.Changeset.valid?/1
  - Write test that omitting meta.trace_id adds {:trace_id, {"can't be blank", ...}} to errors
  - Write test that omitting identity.agent_id adds required error on :agent_id
  - Write test that payload with no cognition/state_delta/control keys is still valid
done_when: "mix test test/observatory/mesh/decision_log_test.exs"
