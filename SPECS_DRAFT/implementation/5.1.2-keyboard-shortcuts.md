---
type: task
id: "5.1.2"
section_id: "5.1"
title: "Keyboard Shortcuts 1–6 and Escape Key Handler"
status: pending
governed_by: ["ADR-022"]
parent_uc: ["UC-0301", "UC-0302"]
---

# Task 5.1.2: Keyboard Shortcuts 1–6 and Escape Key Handler

## Goal

Implement the `handle_event("keydown", ...)` handler mapping keys `"1"`–`"6"` to the six `view_mode` atoms and key `"Escape"` to either drill-down dismissal or Fleet Command fallback. The Escape handler must inspect `selected_session_id`, `inspected_agent_id`, and `drill_down_open` assigns in priority order. Keys outside `"1"`–`"6"` and `"Escape"` must be no-ops handled by a catch-all.

## Governing Decisions

- ADR-022

## Verification UCs

- UC-0301
- UC-0302

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 5.1.2.1 | Add keydown clauses for "1" through "6" with persist_view_mode push_event and catch-all no-op | mix compile --warnings-as-errors | pending |
| 5.1.2.2 | Implement Escape clause with cond priority: selected_session_id, inspected_agent_id, drill_down_open, view_mode fallback | mix compile --warnings-as-errors | pending |
| 5.1.2.3 | Write tests for all six key transitions, key 7 no-op, Escape clearing selected_session_id, Escape from :forensic, Escape from :fleet_command no-op | mix test test/observatory_web/live/dashboard_live_test.exs | pending |
