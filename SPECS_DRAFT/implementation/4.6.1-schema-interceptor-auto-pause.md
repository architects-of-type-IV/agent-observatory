---
type: task
id: "4.6.1"
section_id: "4.6"
title: "SchemaInterceptor Auto-Pause Extension"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0276"]
---

# Task 4.6.1: SchemaInterceptor Auto-Pause Extension

## Goal

Extend the Phase 2 `SchemaInterceptor` module to detect `control.hitl_required == true` on every validated DecisionLog and call `HITLRelay.pause/4` before any downstream broadcast. The triggering DecisionLog must be placed as the first entry in the ETS buffer.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0276

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.6.1.1 | Add maybe_auto_pause/1 private function checking control.hitl_required and calling HITLRelay.pause/buffer_message | mix compile --warnings-as-errors | pending |
| 4.6.1.2 | Call maybe_auto_pause/1 first in SchemaInterceptor post-validation dispatch; skip broadcast on {:paused, _log} | mix compile --warnings-as-errors | pending |
| 4.6.1.3 | Write test that hitl_required: true triggers HITLGateOpenEvent and NOT broadcast until unpause | mix test test/observatory/gateway/schema_interceptor_test.exs | pending |
