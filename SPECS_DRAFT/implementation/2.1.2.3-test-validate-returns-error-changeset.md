---
id: "2.1.2.c"
title: "Test validate/1 returns {:error, changeset} when meta.timestamp absent"
status: pending
task_id: "2.1.2"
governed_by: ["ADR-015"]
parent_uc: ["UC-0210"]
---

goal: "Add a test tagged @tag :validate that calls validate/1 with all required fields except meta.timestamp and asserts {:error, %Ecto.Changeset{valid?: false}} is returned with :timestamp in errors"
allowed_files:
  - test/observatory/gateway/schema_interceptor_test.exs
blocked_by: ["2.1.2.b"]
steps:
  - Build a params map with all required fields except meta.timestamp
  - Call SchemaInterceptor.validate(params)
  - Assert return value matches {:error, %Ecto.Changeset{valid?: false}}
  - Assert changeset.errors contains an entry for :timestamp with can't be blank substring
done_when: "mix test test/observatory/gateway/schema_interceptor_test.exs --only validate"
