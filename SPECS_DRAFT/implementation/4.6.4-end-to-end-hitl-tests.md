---
type: task
id: "4.6.4"
section_id: "4.6"
title: "End-to-End HITL Integration Tests"
status: pending
governed_by: ["ADR-021"]
parent_uc: ["UC-0271", "UC-0272", "UC-0273", "UC-0276", "UC-0277"]
---

# Task 4.6.4: End-to-End HITL Integration Tests

## Goal

Write integration-level tests that exercise the full auto-pause flow from SchemaInterceptor detection through HITLRelay state machine through HTTP endpoint approval to buffer flush.

## Governing Decisions

- ADR-021

## Verification UCs

- UC-0271
- UC-0272
- UC-0273
- UC-0276
- UC-0277

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.6.4.1 | Write integration test: hitl_required DecisionLog not broadcast until POST /unpause called, then broadcast received | mix test test/observatory/gateway/hitl_relay_test.exs | pending |
| 4.6.4.2 | Write integration test for Reject path: POST /inject then /unpause delivers injected message first then buffered messages | mix test test/observatory/gateway/hitl_relay_test.exs | pending |
