---
type: task
id: "4.2.2"
section_id: "4.2"
title: "cron_jobs Migration and Ecto Schema"
status: pending
governed_by: ["ADR-019"]
parent_uc: ["UC-0264", "UC-0265"]
---

# Task 4.2.2: cron_jobs Migration and Ecto Schema

## Goal

Create the Ecto migration that defines the `cron_jobs` table with columns: `id integer primary key autoincrement`, `agent_id text not null`, `schedule text`, `next_fire_at datetime not null`, `payload text not null`, `is_one_time boolean not null default false`. Define the companion Ecto schema module `Observatory.Gateway.CronJob`.

## Governing Decisions

- ADR-019

## Verification UCs

- UC-0264
- UC-0265

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 4.2.2.1 | Generate and populate Ecto migration creating cron_jobs table | mix ecto.migrate && mix compile --warnings-as-errors | pending |
| 4.2.2.2 | Create cron_job.ex with Ecto.Schema for cron_jobs and changeset/2 validating required fields | mix compile --warnings-as-errors | pending |
