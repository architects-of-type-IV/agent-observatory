---
id: "1.1.1.5"
title: "Define embeds_one :action, Action inner schema with Ecto.Enum"
status: pending
task_id: "1.1.1"
governed_by: ["ADR-014"]
parent_uc: ["UC-0200", "UC-0201"]
---

goal: "Add embeds_one :action, Action inner schema with status Ecto.Enum values [:success, :failure, :pending, :skipped] plus tool_call, tool_input, and tool_output_summary fields"
allowed_files:
  - lib/observatory/mesh/decision_log.ex
blocked_by: ["1.1.1.4"]
steps:
  - Inside the embedded_schema block, add embeds_one :action, Action, primary_key: false
  - Define field :status, Ecto.Enum, values: [:success, :failure, :pending, :skipped]
  - Add field :tool_call, :string and field :tool_input, :string
  - Add field :tool_output_summary, :string and confirm compilation passes
done_when: "mix compile --warnings-as-errors"
