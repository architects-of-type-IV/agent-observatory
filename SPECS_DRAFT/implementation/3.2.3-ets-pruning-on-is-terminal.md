---
type: task
id: "3.2.3"
section_id: "3.2"
title: "ETS Pruning on is_terminal"
status: pending
governed_by: ["ADR-017"]
parent_uc: ["UC-0237"]
---

# Task 3.2.3: ETS Pruning on is_terminal

## Goal

When a session is declared terminal, its ETS table must remain queryable for exactly 5 minutes to allow in-flight drill-down views to complete, then be deleted. A duplicate terminal signal for the same session before the timer fires must be silently ignored.

## Governing Decisions

- ADR-017

## Verification UCs

- UC-0237

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.2.3.1 | Implement signal_terminal/1 and handle_cast scheduling 5-minute deletion with duplicate guard | mix compile --warnings-as-errors | pending |
| 3.2.3.2 | Implement handle_info({:prune_session, session_id}) deleting ETS table and registry entry | mix compile --warnings-as-errors | pending |
| 3.2.3.3 | Write tests for grace window queryability, prune message deletes table, duplicate signal does not reset timer | mix test test/observatory/mesh/causal_dag_test.exs | pending |
