---
type: task
id: "3.2.2"
section_id: "3.2"
title: "DAG Delta Broadcast"
status: pending
governed_by: ["ADR-017"]
parent_uc: ["UC-0236"]
---

# Task 3.2.2: DAG Delta Broadcast

## Goal

Every successful node insertion or orphan attachment must produce exactly one PubSub broadcast on `"session:dag:{session_id}"`. The broadcast payload carries `event`, `session_id`, `added_nodes`, `updated_nodes`, and `added_edges`. Rejected insertions and unresolved orphan buffer placements must never trigger a broadcast.

## Governing Decisions

- ADR-017

## Verification UCs

- UC-0236

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.2.2.1 | Implement broadcast_delta/4 private function called after every successful ETS write | mix compile --warnings-as-errors | pending |
| 3.2.2.2 | Write tests for successful child insertion broadcasting dag_delta and cycle rejection emitting no broadcast | mix test test/observatory/mesh/causal_dag_test.exs | pending |
