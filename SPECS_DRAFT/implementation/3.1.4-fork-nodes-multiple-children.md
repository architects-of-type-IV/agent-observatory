---
type: task
id: "3.1.4"
section_id: "3.1"
title: "Fork Nodes (Multiple Children)"
status: pending
governed_by: ["ADR-017"]
parent_uc: ["UC-0234"]
---

# Task 3.1.4: Fork Nodes (Multiple Children)

## Goal

Fork status is derived at read time from the length of a node's `children` list; it is not stored as a flag. `CausalDAG` must update a parent's `children` list atomically each time a new child is attached so that both the first and subsequent children appear in subsequent reads.

## Governing Decisions

- ADR-017

## Verification UCs

- UC-0234

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.1.4.1 | Confirm read-modify-write pattern for children list correctly handles two sequential child attachments | mix compile --warnings-as-errors | pending |
| 3.1.4.2 | Implement get_children/2 returning {:ok, children_list} or {:error, :not_found} | mix compile --warnings-as-errors | pending |
| 3.1.4.3 | Write tests for two children producing fork node and single child returning length-1 list | mix test test/observatory/mesh/causal_dag_test.exs | pending |
