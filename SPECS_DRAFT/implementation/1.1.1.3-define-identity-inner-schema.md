---
id: "1.1.1.3"
title: "Define embeds_one :identity, Identity inner schema"
status: pending
task_id: "1.1.1"
governed_by: ["ADR-014"]
parent_uc: ["UC-0200", "UC-0201"]
---

goal: "Add embeds_one :identity, Identity inner schema with agent_id, agent_type, and capability_version fields"
allowed_files:
  - lib/observatory/mesh/decision_log.ex
blocked_by: ["1.1.1.2"]
steps:
  - Inside the embedded_schema block, add embeds_one :identity, Identity, primary_key: false
  - Define the inline inner schema with field :agent_id, :string
  - Add field :agent_type, :string
  - Add field :capability_version, :string and confirm compilation passes
done_when: "mix compile --warnings-as-errors"
