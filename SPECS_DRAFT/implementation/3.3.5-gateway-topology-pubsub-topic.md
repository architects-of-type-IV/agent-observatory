---
type: task
id: "3.3.5"
section_id: "3.3"
title: "gateway:topology PubSub Topic"
status: pending
governed_by: ["ADR-016"]
parent_uc: ["UC-0249"]
---

# Task 3.3.5: gateway:topology PubSub Topic

## Goal

`"gateway:topology"` is the sole channel through which the Fleet Command LiveView learns of node and edge state changes. The Fleet Command LiveView must subscribe to this topic in `mount/3` and forward each broadcast payload to the `TopologyMap` hook via `push_event/3`. Direct ETS reads from the LiveView are explicitly prohibited.

## Governing Decisions

- ADR-016

## Verification UCs

- UC-0249

## Subtasks

| ID | Title | Done When | Status |
|----|-------|-----------|--------|
| 3.3.5.1 | Write test in topology_builder_test.exs verifying subscriber receives nodes/edges keys on gateway:topology | mix test test/observatory/gateway/topology_builder_test.exs | pending |
| 3.3.5.2 | Add @moduledoc to topology_builder.ex declaring sole-publisher constraint and direct-ETS prohibition | mix compile --warnings-as-errors | pending |
